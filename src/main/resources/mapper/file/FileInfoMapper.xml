<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xi.fmcs.domain.file.repository.FileInfoRepository">

  <!-- 파일 정보 저장 -->
  <insert id="XI_SP_FMCS_ADMIN_FILE_INFO_C" statementType="CALLABLE" parameterType="hashMap">
    { CALL
      XI_SP_FMCS_ADMIN_FILE_INFO_C(
        #{@ATTACH_TABLE_NAME,	mode=IN,	jdbcType=VARCHAR},
        #{@ATTACH_TABLE_SEQ, 	mode=IN,	jdbcType=INTEGER},
        #{@FILE_INPUT_NAME, 	mode=IN,	jdbcType=VARCHAR},
        #{@FILE_PATH, 		mode=IN,	jdbcType=VARCHAR},
        #{@FILE_ORG_NAME, 		mode=IN,	jdbcType=VARCHAR},
        #{@FILE_STORED_NAME, 		mode=IN,	jdbcType=VARCHAR},
        #{@FILE_SIZE, 		mode=IN,	jdbcType=VARCHAR},
        #{@ADMIN_REG_SEQ, 	mode=IN,	jdbcType=INTEGER},
        #{@REG_DATE, 		mode=IN,	jdbcType=TIMESTAMP}
      )
    }
  </insert>

  <!-- 파일 정보 수정 -->
  <update id="XI_SP_FMCS_ADMIN_FILE_INFO_U" statementType="CALLABLE" parameterType="hashMap">
    { CALL
      XI_SP_FMCS_ADMIN_FILE_INFO_U(
        #{@ATTACH_TABLE_NAME,	mode=IN,	jdbcType=VARCHAR},
        #{@ATTACH_TABLE_SEQ, 	mode=IN,	jdbcType=INTEGER},
        #{@FILE_INPUT_NAME, 	mode=IN,	jdbcType=VARCHAR},
        #{@FILE_PATH, 	mode=IN,	jdbcType=VARCHAR},
        #{@FILE_ORG_NAME, 	mode=IN,	jdbcType=VARCHAR},
        #{@FILE_STORED_NAME, 	mode=IN,	jdbcType=VARCHAR},
        #{@FILE_SIZE, 	mode=IN,	jdbcType=VARCHAR},
        #{@ADMIN_MOD_SEQ, 		mode=IN,	jdbcType=INTEGER}
      )
    }
  </update>

  <!-- 파일 정보 삭제 -->
  <delete id="XI_SP_FMCS_ADMIN_FILE_INFO_D" statementType="CALLABLE" parameterType="hashMap">
    { CALL
      XI_SP_FMCS_ADMIN_FILE_INFO_D(
        #{@attach_table_seq, 	mode=IN,	jdbcType=INTEGER},
        #{@file_input_name,	mode=IN,	jdbcType=VARCHAR},
        #{@attach_table_name, 	mode=IN,	jdbcType=VARCHAR}
      )
    }
  </delete>

  <!--커뮤니티(동적멀티첨부) 파일삭제-->
  <delete id="XI_SP_FMCS_ADMIN_FILE_SEQ_D" statementType="CALLABLE" parameterType="hashMap">
    { CALL
      XI_SP_FMCS_ADMIN_FILE_SEQ_D(
        #{@file_info_seq, 	mode=IN,	jdbcType=INTEGER},
        #{@attach_table_seq,	mode=IN,	jdbcType=INTEGER},
        #{@attach_table_name, 	mode=IN,	jdbcType=VARCHAR}
      )
    }
  </delete>

  <!-- 파일 목록 조회 -->
  <select id="XI_SP_FMCS_ADMIN_FILE_L" statementType="CALLABLE"
          parameterType="hashMap" resultType="FileInfoDetailDto">
    { CALL
    XI_SP_FMCS_ADMIN_FILE_L(
    #{@ATTACH_TABLE_NAME,	mode=IN,	jdbcType=VARCHAR},
    #{@ATTACH_TABLE_SEQ, 	mode=IN,	jdbcType=INTEGER}
    )
    }
  </select>

  <!-- 파일 목록 조회 -->
  <select id="XI_SP_FMCS_ADMIN_FILE_V2_L" statementType="CALLABLE"
          parameterType="hashMap" resultType="FileInfoDetailDto">
    { CALL
      XI_SP_FMCS_ADMIN_FILE_V2_L(
        #{@file_input_name,	mode=IN,	jdbcType=VARCHAR},
        #{@attach_table_seq, 	mode=IN,	jdbcType=INTEGER},
        #{@attach_table_name, 	mode=IN,	jdbcType=VARCHAR}
      )
    }
  </select>

  <!-- 파일시퀀스로 상세 조회 -->
  <select id="XI_SP_R_FMCS_FILE_INFO_BY_SEQ_R" statementType="CALLABLE"
          parameterType="hashMap" resultType="FileInfoDetailDto">
    { CALL
      XI_SP_R_FMCS_FILE_INFO_BY_SEQ_R(
        #{@FILE_SEQ, 	mode=IN,	jdbcType=INTEGER}
      )
    }
  </select>

  <!-- 파일 상세 조회 -->
  <select id="XI_SP_R_FMCS_FILE_INFO_R" statementType="CALLABLE"
          parameterType="hashMap" resultType="FileInfoDetailDto">
    { CALL
      XI_SP_R_FMCS_FILE_INFO_R(
        #{@ATTACH_TABLE_NAME,	mode=IN,	jdbcType=VARCHAR},
        #{@ATTACH_TABLE_SEQ, 	mode=IN,	jdbcType=INTEGER},
        #{@FILE_INPUT_NAME,	mode=IN,	jdbcType=VARCHAR}
      )
    }
  </select>

</mapper>